{"version":3,"sources":["../../src/pages/nreservat/nreservat.module.ts","../../src/pages/nreservat/nreservat.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { NreservatPage } from './nreservat';\n\n@NgModule({\n  declarations: [\n    NreservatPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(NreservatPage),\n  ],\n})\nexport class NreservatPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/nreservat/nreservat.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { ModalController, Events} from 'ionic-angular';\nimport { RestProvider } from '../../providers/rest/rest';\n\nimport { CalendarModal, CalendarModalOptions, DayConfig, CalendarResult } from \"ion2-calendar\";\n import { Storage } from '@ionic/storage';\n\nimport { LoadingController } from 'ionic-angular';\nimport { AlertController } from 'ionic-angular';\n\nimport {CalendarComponentOptions} from 'ion2-calendar';\nimport * as moment from 'moment';\n\n/**\n * Generated class for the NreservaPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n \n\n@IonicPage()\n@Component({\n  selector: 'page-nreservat',\n  templateUrl: 'nreservat.html',\n})\nexport class NreservatPage {\n\nfechaSeleccionadaN:any;\nserviciosCita:any=[];\ncita:any={};\n  constructor(public navCtrl: NavController, public navParams: NavParams,public modalCtrl: ModalController,public events: Events,public alertCtrl: AlertController, public loadingCtrl: LoadingController,public restProvider: RestProvider,public storage: Storage) {\n\n\n    events.subscribe('addServicio', (ss) => {\n    // user and time are the same arguments passed in `events.publish(user, time)`\n    this.serviciosCita.push(ss);\n\n    if(this.cita.horaInicio){this.asignarHoras();}\n\n\n  });\n\n\n  }\n\n\n\n  ionViewDidLoad() {\n\n      this.storage.get('usr_tok_byae').then((result) => {\n    \n    if(result){\n      this.idEmpleado = result.idEmpleado;\n      console.log(result);\n    } \n    });\n\n  }\n\ngetTotal(){\n  var total = 0;\n  this.serviciosCita.forEach(item=>{\n  item.precioFinal = item.precio;\n    total+=item.precio;\n  });\n  return total;\n}\n\n\nguardarNR(){\n\n\n\tvar fechaSeleccionada = this.cita.fecha;\n\n\tvar dataE= {\n\tidEmpleado:this.idEmpleado,\n\thoraInicio: fechaSeleccionada+' '+this.cita.horaInicio+':00',\n\thoraFinalEsperado: fechaSeleccionada+' '+this.cita.horaFin+':00'\n\t}\n\nconsole.log(dataE);\n\n       let loading = this.loadingCtrl.create({content : \"Cargando...\"});\n  loading.present();\n\n                    this.restProvider.agregarBloque(dataE)\n      .then(data => {\n\n                 loading.dismiss();\n                  \tthis.presentAlert('Guardado','Reserva guardada con exito');\n         \t this.navCtrl.pop();\n        },err => {\n                      loading.dismiss();\n\n               console.log('someError');\n              \tthis.presentAlert('Ups!','Ha ocurrido un error inesperado');\n            });\n\n\n\t\n}\n\n\n\n    presentAlert(titulo,mensaje) {\n    let alert = this.alertCtrl.create({\n      title: titulo,\n      subTitle: mensaje,\n      buttons: ['Cerrar']\n    });\n    alert.present();\n  }\n\n\nsacarItem(ins){\n\tthis.serviciosCita.splice(ins, 1);\n\t if(this.cita.horaInicio){this.asignarHoras();}\n}\n\n\n\nopenCalendar() {\n    const options: CalendarModalOptions = {\n     pickMode: 'single',\n      title: ' ',\n      weekStart:1,\n      weekdays:['D', 'L', 'M', 'M', 'J', 'V', 'S'],\n      color:'light',\n      doneLabel:'Listo',\n      closeLabel:'Salir',\n      defaultDates:this.fechasEspeciales,\n    };\n    let myCalendar =  this.modalCtrl.create(CalendarModal, {\n      options: options\n    });\n \n    myCalendar.present();\n \n    myCalendar.onDidDismiss((date: CalendarResult, type: string) => {\n      console.log(date);\n\n     \t\tif(date){\n\t\tthis.cita.fecha = date.string;\n            }\n\n\n    })\n  }\n\nasignarHoras(){\n\t\n\tvar hInicio = this.cita.fecha+' '+this.cita.horaInicio;\n\tvar hInicioTemp = this.cita.fecha+' '+this.cita.horaInicio;\n\tconsole.log(hInicio);\n\n\t this.serviciosCita.forEach((item, index)=>{\n\n\t item.inicio = hInicioTemp;\n\t item.fin = moment(hInicioTemp, 'YYYY-MM-DD HH:mm').add(item.duracion, 'minutes').format(\"YYYY-MM-DD HH:mm\");\n\t hInicioTemp = moment(hInicioTemp, 'YYYY-MM-DD HH:mm').add(item.duracion, 'minutes').format(\"YYYY-MM-DD HH:mm\");\n\n\n\n\t });\n\n\t console.log(this.serviciosCita);\n}\n\nshowSome(ds){\n\tconsole.log(ds);\n}\n\n\ngetHoras(hora){\n \n  return Math.floor(hora/60);\n}\n\n\n\n\t   openServices() {\n/*\n\t       var dataE={idCategoria:this.navParams.get('idCategoria'),\n\t                idCentro:this.navParams.get('idCentro')};\n*/\n\t   let profileModal = this.modalCtrl.create('ModalServicesPage');\n\t   profileModal.present();\n\n\t }\n\n\n\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/nreservat/nreservat.ts"],"sourceRoot":""}