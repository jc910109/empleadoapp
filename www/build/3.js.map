{"version":3,"sources":["../../src/pages/perfil/perfil.module.ts","../../src/pages/perfil/perfil.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PerfilPage } from './perfil';\n\n@NgModule({\n  declarations: [\n    PerfilPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PerfilPage),\n  ],\n})\nexport class PerfilPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/perfil/perfil.module.ts","import { Component, NgZone} from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { AlertController } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\n\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { ModalController } from 'ionic-angular';\nimport { LoadingController } from 'ionic-angular';\nimport { Events } from 'ionic-angular';\nimport { RestProvider } from '../../providers/rest/rest';\n\n\n\n@IonicPage()\n@Component({\n  selector: 'page-perfil',\n  templateUrl: 'perfil.html',\n})\nexport class PerfilPage {\ndataUser:any={};\nimageURI:any;\nimageFileName:any;\nporcenBarra=0;\n  constructor(private DomSanitizer: DomSanitizer,public navCtrl: NavController, public navParams: NavParams, public modalCtrl: ModalController, public alertCtrl: AlertController,public loadingCtrl: LoadingController,public events: Events, public zone: NgZone,public apiProvider: RestProvider, public storage: Storage) {\n\n  this.editarData=true;\n  this.dataUserInput={};\n \n  }\n\n  ionViewDidLoad() {\n\n\n   this.storage.get('usr_tok_byae').then((result) => {\n    \n    if(result){\n      this.dataUser = result;\n      console.log(this.dataUser);\n \n    } else {\n    console.log('error-nologin');\n    }\n    });\n\n\n\n\n  }\n\n  agregadoOk() {\n  let alert = this.alertCtrl.create({\n    title: 'Editado correctamente',\n    subTitle: 'Sus datos han sido editados correctamente',\n    buttons: ['Cerrar']\n  });\n  alert.present();\n}\n\n\n  errorSu() {\n  let alert = this.alertCtrl.create({\n    title: 'Error',\n    subTitle: 'Ha ocurrido un error',\n    buttons: ['Cerrar']\n  });\n  alert.present();\n}\n\n\n    getPorcentaje(){\n\n    let enviar = ((900)/(this.dataUser.completadas*100)) + '%';\n    console.log(enviar);\n    return enviar;\n       \n  \n  }\n\n\n\n\n getImages = () => {\n  const options: CameraOptions = {\n    quality: 100,\n    destinationType: navigator.camera.DestinationType.FILE_URI,\n    sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY\n  }\n\n  navigator.camera.getPicture((imageData) => {\nconsole.log(imageData);\n     this.zone.run(()=>{ this.imageFileName = imageData; }); \n\n  }, (err) => {\n\n    console.log(err);\n\n\n  },options);\n}\n\n\n  guardarCambios(){\n\n    if(this.imageFileName){\n\n    this.uploadFile(this.dataUser);\n\n    }\n    else{\n\n         let loading = this.loadingCtrl.create({content : \"Cargando ...\"});\n          loading.present();\n\n\n          this.apiProvider.editarEmpleadoAE(this.dataUser)\n          .then(data => {\n\n          loading.dismissAll();\n\n          console.log(data);\n          if(data.affectedRows>0){\n          \t\tconsole.log(this.dataUser);\n               this.storage.set('usr_tok_byae', this.dataUser);\n               this.events.publish('loginOK',this.dataUser);\n\n/*\n            this.storage.get('usr_tok_byae').then((value) => {\n            // console.log(value);\n            var da = value;\n\n\n            da.telefono = this.dataUser.telefono;\n            da.nombre = this.dataUser.nombreEmpleado;\n               \n\n            console.log(da);\n\n            this.storage.set('usr_tok_byae', da);\n            this.events.publish('loginOK',da);\n\n            }).catch(() => resolve(false));\n*/\n\n          this.agregadoOk();\n          this.editarData=true;\n\n          }\n          else{\n          console.log('Ha ocurrido un error');\n          }\n\n\n          });\n\n      }\n\n\n   //console.log(this.dataUser);\n\n  }\n\n\n\n  cancelarEdicion(){\n\n\n   this.storage.get('usr_tok_byae').then((result) => {\n    \n    if(result){\n      this.dataUser = result;\n      console.log(this.dataUser);\n         this.editarData=true;\n   this.imageFileName=undefined;\n\n \n    } else {\n    console.log('error-nologin');\n    }\n    });\n  }\n\n\n  uploadFile = (datak) => {\n  let loader = this.loadingCtrl.create({\n    content: \"Guardando...\"\n  });\n  loader.present();\n  //const fileTransfer: FileTransferObject = this.transfer.create();\n\n let options = new FileUploadOptions();\n  options.fileKey = \"ionicfile\";\noptions.fileName = 'ionicfile2';\noptions.mimeType = \"image/jpeg\";\noptions.chunkedMode = false;\noptions.headers =  {};\n\noptions.params = datak;\n\n\nvar ft = new FileTransfer();\n  ft.upload(this.imageFileName, 'http://50.116.17.150:3000/editarCFE2', (datag) => {\n    console.log(datag);\n\n  var data = JSON.parse(datag.response);\n    console.log(data);\n              if(data.data && data.data.affectedRows>0){\n\n              /*\n            this.storage.get('usr_tok_byae').then((value) => {\n            // console.log(value);\n            var da = value;\n\n \n            da.telefono = this.dataUser.telefono;\n            da.nombre = this.dataUser.nombre;\n            da.idFoto = data.idFoto;\n            console.log(da);\n            this.storage.set(`usr_tok_byae`, da);\n\n\n            }).catch(() => resolve(false));\n\t\t\t*/\n\t\t\tthis.dataUser.idFoto = \tdata.idFoto\n\t\t  this.storage.set('usr_tok_byae', this.dataUser);\n          this.events.publish('loginOK',this.dataUser);\n          loader.dismiss();\n          this.agregadoOk();\n        \n\n          //console.log('borrada');\n          this.editarData=true;\n\n          }\n          else{\n\n            loader.dismiss();\n             this.errorSu();\n          console.log('Ha ocurrido un error');\n          }\n\n\n  }, (err) => {\n    console.log(err);\n    loader.dismiss();\n   // this.presentToast(err);\n  },options);\n\n\n}\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/perfil/perfil.ts"],"sourceRoot":""}